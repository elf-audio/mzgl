
int keycodeToKey(int32_t k, bool shiftIsDown) {
	const static std::map<int32_t, int> keyboardMap {{AKEYCODE_0, '0'},
													 {AKEYCODE_1, '1'},
													 {AKEYCODE_2, '2'},
													 {AKEYCODE_3, '3'},
													 {AKEYCODE_4, '4'},
													 {AKEYCODE_5, '5'},
													 {AKEYCODE_6, '6'},
													 {AKEYCODE_7, '7'},
													 {AKEYCODE_8, '8'},
													 {AKEYCODE_9, '9'},
													 {AKEYCODE_STAR, '*'},
													 {AKEYCODE_POUND, '#'},
													 {AKEYCODE_A, 'a'},
													 {AKEYCODE_B, 'b'},
													 {AKEYCODE_C, 'c'},
													 {AKEYCODE_D, 'd'},
													 {AKEYCODE_E, 'e'},
													 {AKEYCODE_F, 'f'},
													 {AKEYCODE_G, 'g'},
													 {AKEYCODE_H, 'h'},
													 {AKEYCODE_I, 'i'},
													 {AKEYCODE_J, 'j'},
													 {AKEYCODE_K, 'k'},
													 {AKEYCODE_L, 'l'},
													 {AKEYCODE_M, 'm'},
													 {AKEYCODE_N, 'n'},
													 {AKEYCODE_O, 'o'},
													 {AKEYCODE_P, 'p'},
													 {AKEYCODE_Q, 'q'},
													 {AKEYCODE_R, 'r'},
													 {AKEYCODE_S, 's'},
													 {AKEYCODE_T, 't'},
													 {AKEYCODE_U, 'u'},
													 {AKEYCODE_V, 'v'},
													 {AKEYCODE_W, 'w'},
													 {AKEYCODE_X, 'x'},
													 {AKEYCODE_Y, 'y'},
													 {AKEYCODE_Z, 'z'},
													 {AKEYCODE_COMMA, ','},
													 {AKEYCODE_PERIOD, '.'},
													 {AKEYCODE_SPACE, ' '},
													 {AKEYCODE_ENTER, '\n'},
													 {AKEYCODE_FORWARD_DEL, MZ_KEY_DELETE},
													 {AKEYCODE_DEL, MZ_KEY_DELETE},
													 {AKEYCODE_GRAVE, '`'},
													 {AKEYCODE_MINUS, '-'},
													 {AKEYCODE_EQUALS, '='},
													 {AKEYCODE_LEFT_BRACKET, '['},
													 {AKEYCODE_RIGHT_BRACKET, ']'},
													 {AKEYCODE_BACKSLASH, '\\'},
													 {AKEYCODE_SEMICOLON, ';'},
													 {AKEYCODE_APOSTROPHE, '\''},
													 {AKEYCODE_SLASH, '/'},
													 {AKEYCODE_AT, '@'},
													 {AKEYCODE_PLUS, '+'},
													 {AKEYCODE_NUMPAD_0, '0'},
													 {AKEYCODE_NUMPAD_1, '1'},
													 {AKEYCODE_NUMPAD_2, '2'},
													 {AKEYCODE_NUMPAD_3, '3'},
													 {AKEYCODE_NUMPAD_4, '4'},
													 {AKEYCODE_NUMPAD_5, '5'},
													 {AKEYCODE_NUMPAD_6, '6'},
													 {AKEYCODE_NUMPAD_7, '7'},
													 {AKEYCODE_NUMPAD_8, '8'},
													 {AKEYCODE_NUMPAD_9, '9'},
													 {AKEYCODE_NUMPAD_DIVIDE, '/'},
													 {AKEYCODE_NUMPAD_MULTIPLY, '*'},
													 {AKEYCODE_NUMPAD_SUBTRACT, '-'},
													 {AKEYCODE_NUMPAD_ADD, '+'},
													 {AKEYCODE_NUMPAD_DOT, '.'},
													 {AKEYCODE_NUMPAD_COMMA, ','},
													 {AKEYCODE_NUMPAD_ENTER, '\n'},
													 {AKEYCODE_NUMPAD_EQUALS, '='},
													 {AKEYCODE_NUMPAD_LEFT_PAREN, '('},
													 {AKEYCODE_NUMPAD_RIGHT_PAREN, ')'},
													 {AKEYCODE_TAB, MZ_KEY_TAB},
													 {AKEYCODE_DPAD_LEFT, MZ_KEY_LEFT},
													 {AKEYCODE_DPAD_RIGHT, MZ_KEY_RIGHT},
													 {AKEYCODE_DPAD_DOWN, MZ_KEY_DOWN},
													 {AKEYCODE_DPAD_UP, MZ_KEY_UP}};

	const static std::map<int32_t, int> shiftKeyboardMap {{AKEYCODE_0, '!'},
														  {AKEYCODE_1, '@'},
														  {AKEYCODE_2, '2'},
														  {AKEYCODE_3, '$'},
														  {AKEYCODE_4, '$'},
														  {AKEYCODE_5, '%'},
														  {AKEYCODE_6, '^'},
														  {AKEYCODE_7, '&'},
														  {AKEYCODE_8, '*'},
														  {AKEYCODE_9, '('},
														  {AKEYCODE_STAR, '*'},
														  {AKEYCODE_POUND, '#'},
														  {AKEYCODE_A, 'A'},
														  {AKEYCODE_B, 'B'},
														  {AKEYCODE_C, 'C'},
														  {AKEYCODE_D, 'D'},
														  {AKEYCODE_E, 'E'},
														  {AKEYCODE_F, 'F'},
														  {AKEYCODE_G, 'G'},
														  {AKEYCODE_H, 'H'},
														  {AKEYCODE_I, 'I'},
														  {AKEYCODE_J, 'J'},
														  {AKEYCODE_K, 'K'},
														  {AKEYCODE_L, 'L'},
														  {AKEYCODE_M, 'M'},
														  {AKEYCODE_N, 'N'},
														  {AKEYCODE_O, 'O'},
														  {AKEYCODE_P, 'P'},
														  {AKEYCODE_Q, 'Q'},
														  {AKEYCODE_R, 'R'},
														  {AKEYCODE_S, 'S'},
														  {AKEYCODE_T, 'T'},
														  {AKEYCODE_U, 'U'},
														  {AKEYCODE_V, 'V'},
														  {AKEYCODE_W, 'W'},
														  {AKEYCODE_X, 'X'},
														  {AKEYCODE_Y, 'Y'},
														  {AKEYCODE_Z, 'Z'},
														  {AKEYCODE_COMMA, '<'},
														  {AKEYCODE_PERIOD, '>'},
														  {AKEYCODE_SPACE, ' '},
														  {AKEYCODE_ENTER, '\n'},
														  {AKEYCODE_FORWARD_DEL, MZ_KEY_DELETE},
														  {AKEYCODE_DEL, MZ_KEY_DELETE},
														  {AKEYCODE_GRAVE, '~'},
														  {AKEYCODE_MINUS, '_'},
														  {AKEYCODE_EQUALS, '+'},
														  {AKEYCODE_LEFT_BRACKET, '{'},
														  {AKEYCODE_RIGHT_BRACKET, '}'},
														  {AKEYCODE_BACKSLASH, '|'},
														  {AKEYCODE_SEMICOLON, ':'},
														  {AKEYCODE_APOSTROPHE, '\"'},
														  {AKEYCODE_SLASH, '?'},
														  {AKEYCODE_AT, '@'},
														  {AKEYCODE_PLUS, '+'},
														  {AKEYCODE_NUMPAD_0, '0'},
														  {AKEYCODE_NUMPAD_1, '1'},
														  {AKEYCODE_NUMPAD_2, '2'},
														  {AKEYCODE_NUMPAD_3, '3'},
														  {AKEYCODE_NUMPAD_4, '4'},
														  {AKEYCODE_NUMPAD_5, '5'},
														  {AKEYCODE_NUMPAD_6, '6'},
														  {AKEYCODE_NUMPAD_7, '7'},
														  {AKEYCODE_NUMPAD_8, '8'},
														  {AKEYCODE_NUMPAD_9, '9'},
														  {AKEYCODE_NUMPAD_DIVIDE, '/'},
														  {AKEYCODE_NUMPAD_MULTIPLY, '*'},
														  {AKEYCODE_NUMPAD_SUBTRACT, '-'},
														  {AKEYCODE_NUMPAD_ADD, '+'},
														  {AKEYCODE_NUMPAD_DOT, '.'},
														  {AKEYCODE_NUMPAD_COMMA, ','},
														  {AKEYCODE_NUMPAD_ENTER, '\n'},
														  {AKEYCODE_NUMPAD_EQUALS, '='},
														  {AKEYCODE_NUMPAD_LEFT_PAREN, '('},
														  {AKEYCODE_NUMPAD_RIGHT_PAREN, ')'},
														  {AKEYCODE_TAB, MZ_KEY_SHIFT_TAB},
														  {AKEYCODE_DPAD_LEFT, MZ_KEY_LEFT},
														  {AKEYCODE_DPAD_RIGHT, MZ_KEY_RIGHT},
														  {AKEYCODE_DPAD_DOWN, MZ_KEY_DOWN},
														  {AKEYCODE_DPAD_UP, MZ_KEY_UP}};

	auto &keymap = (shiftIsDown) ? shiftKeyboardMap : keyboardMap;
	auto iter	 = keymap.find(k);
	if (iter != keymap.end()) {
		return static_cast<int>(iter->second);
	}

	Log::e() << "Unhandled key found \'" << k << "\'";
	return 0;
}